@echo off

echo Enter type of project:
set /p project_type=

echo Enter repository URL:
set /p repo_url=

echo Enter branch name:
set /p branch_name=

if /i "%project_type%"=="maven" (
  set repo_folder=maven-repo
  set dependencies_file=maven-dependencies.csv
  git clone --branch %branch_name% %repo_url% %repo_folder%
  cd %repo_folder%
  mvn dependency:list -DoutputFile=%dependencies_file%
) else if /i "%project_type%"=="npm" (
  set repo_folder=npm-repo
  set dependencies_file=npm-dependencies.csv
  git clone --branch %branch_name% %repo_url% %repo_folder%
  cd %repo_folder%
  npm install
  npm list --prod --parseable --depth=0 > %dependencies_file%
) else (
  echo Invalid project type. Please enter either "maven" or "npm".
  exit /b 1
)

echo Dependencies saved to %dependencies_file%
